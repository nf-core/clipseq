nextflow_pipeline {
    name "prepare_genome_chrom_sizes"
    script "main.nf"

    test("no_chrom_sizes") {
        tag "no_chrom_sizes"
        tag "test"
        when {
            params {
                outdir = "$outputDir"
                only_genome = true
                save_reference = true
                target_chrom_sizes = null
                smrna_chrom_sizes = null
            }
        }

        then {
            assert workflow.success

            assert new File("$outputDir/00_genome/homosapiens_smallRNA.fa.sizes").exists()
            assert new File("$outputDir/00_genome/yeast_MitoV.fa.sizes").exists()
        }
    }
}
